var object_prototype=Object.prototype;Object.defineProperties(object_prototype,{has_parent:{value:!1,writable:!0,enumerable:!1},is_child:{value:!1,writable:!0,enumerable:!1},inherits_from:{value:function(e){var t=Function.bind.apply(e,arguments);this.prototype=new t,this.prototype._super=new t,this.prototype.constructor=this,this.prototype.is_child=this.prototype.has_parent=!0},writable:!1,enumerable:!1,configurable:!1}});var LaceyApp,LaceyModule,LaceyAbstactModule,modules,validate_app_name,validate_duplicated_module,validate_module_name,validate_module_type,validate_parent_module_name;LaceyApp=function(e){return validate_app_name.call(this,e),this.modules=[],this.name=e,modules={},this},LaceyApp.prototype.register_module=function(e,t,i){return"function"==typeof t&&(i=t,t=null),validate_module_name.call(this,e),validate_module_type.call(this,i),validate_duplicated_module.call(this,e),this[e]=new LaceyModule(e,t,i),this.modules.push(e),modules[e]=i,this[e]},LaceyApp.prototype.register_abstract_module=function(e,t){return validate_module_name.call(this,e),validate_module_type.call(this,t),validate_duplicated_module.call(this,e),this[e]=new LaceyAbstactModule(e,t),this.modules.push(e),modules[e]=t,this[e]},LaceyApp.prototype.unregister_module=function(e){return validate_module_name.call(this,e),this[e]=null,modules[e]=null,delete this[e],delete modules[e],this},validate_app_name=function(e){if("string"!=typeof e||""===e)throw"InvalidNameError - you must give a valid name to your lacey app";return!0},validate_module_name=function(e){if("string"!=typeof e||""===e)throw"InvalidModuleNameError - you must give a valid name to your module";return!0},validate_module_type=function(e){if("function"!=typeof e)throw"InvalidModuleError - your module must be a function";return!0},validate_duplicated_module=function(e){if(-1!==this.modules.indexOf(e))throw"DuplicateModuleError - your module has already been registered";return!0},LaceyModule=function(e,t,i){var a=null;return this.initialized=!1,this.module_name=e,this.get_instance=function(){return null===a&&(null!==t&&t!==e&&(validate_parent_module_name.call(this,t),i.inherits_from(modules[t])),a=new i),a},this},LaceyModule.prototype.initialize=function(){var e=this.get_instance();return this.initialized||"function"!=typeof e.initialize||(e.initialize(),this.initialized=!0),e},validate_parent_module_name=function(e){if("undefined"==typeof modules[e])throw"InvalidParentModuleError - the parent module does not exist";return!0},LaceyAbstactModule=function(){this.get_instance=function(){throw"InvalidAbstractModuleMethod - an abstract module does not have an instance"},this.initialize=function(){throw"InvalidAbstractModuleMethod - an abstract module can not be initialized"},this.initialized=void 0},LaceyAbstactModule.inherits_from(LaceyModule),window.LaceyApp=LaceyApp;
